/* Comprehensive Theming System */
:root {
    /* Brand Colors - constant across themes */
    --brand: #7C3AED;        /* Violet */
    --brand-dark: #6D28D9;   /* Darker violet */
    --brand-light: #8B5CF6;  /* Lighter violet */
    --brand-hover: #6D28D9;  /* Hover state */

    /* Semantic Colors - Light Theme */
    --bg-primary: #FFFFFF;      /* Main background */
    --bg-secondary: #F9FAFB;    /* Secondary background */
    --bg-tertiary: #F3F4F6;     /* Tertiary background */
    --bg-elevated: #FFFFFF;     /* Cards, modals */
    --bg-input: #FFFFFF;        /* Form inputs */
    --bg-hover: #F3F4F6;        /* Hover states */

    /* Text Colors */
    --text-primary: #111827;    /* Main text */
    --text-secondary: #4B5563;  /* Secondary text */
    --text-tertiary: #6B7280;   /* Tertiary text */
    --text-disabled: #9CA3AF;   /* Disabled text */
    --text-inverse: #FFFFFF;    /* Text on dark backgrounds */

    /* Border & Divider Colors */
    --border-primary: #E5E7EB;  /* Main borders */
    --border-secondary: #D1D5DB; /* Secondary borders */
    --border-focus: var(--brand); /* Focus state */
    --divider: #E5E7EB;         /* Dividers */

    /* Interactive States */
    --interactive-hover: #F3F4F6;
    --interactive-active: #E5E7EB;
    --interactive-disabled: #F3F4F6;

    /* Semantic Status Colors */
    --success: #10B981;
    --success-bg: #D1FAE5;
    --warning: #F59E0B;
    --warning-bg: #FEF3C7;
    --error: #EF4444;
    --error-bg: #FEE2E2;
    --info: #3B82F6;
    --info-bg: #DBEAFE;

    /* Shadows - Subtle elevation, minimal but perceptible */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.04);
    --shadow-md: 0 2px 8px -2px rgba(0, 0, 0, 0.08), 0 4px 4px -2px rgba(0, 0, 0, 0.03);
    --shadow-lg: 0 8px 16px -4px rgba(0, 0, 0, 0.1), 0 4px 8px -4px rgba(0, 0, 0, 0.06);
    --shadow-focus: 0 0 0 3px rgba(124, 58, 237, 0.1); /* Focus ring */

    /* Spacing Scale - Harmonious progression based on multiples of 4px */
    --space-1: 0.25rem;   /* 4px - Minimal spacing */
    --space-2: 0.5rem;    /* 8px - Tight spacing */
    --space-3: 0.75rem;   /* 12px - Compact spacing */
    --space-4: 1rem;      /* 16px - Base spacing unit */
    --space-6: 1.5rem;    /* 24px - Comfortable spacing */
    --space-8: 2rem;      /* 32px - Generous spacing */
    --space-12: 3rem;     /* 48px - Section spacing */
    --space-16: 4rem;     /* 64px - Large section spacing */

    /* Border Radius */
    --radius-sm: 0;      /* Small radius - brutalist, sharp edges */
    --radius-md: 0;      /* Medium radius */
    --radius-lg: 0;      /* Large radius */

    /* Max Widths */
    --max-width-content: 960px;   /* Standard content width */
    --max-width-wide: 1400px;     /* Wide layout */
    --max-width-full: 1600px;     /* Full width layout */

    /* Sidebar Widths */
    --sidebar-left-width: 280px;
    --sidebar-right-width: 300px;

    /* Typography Scale - Based on golden ratio (1.618) and major third (1.25) */
    --text-xs: 0.75rem;      /* 10.5px - Small labels, captions */
    --text-sm: 0.875rem;     /* 12.25px - Secondary text */
    --text-base: 1rem;       /* 14px - Body text */
    --text-md: 1.125rem;     /* 15.75px - Emphasis */
    --text-lg: 1.266rem;     /* 17.7px - h4 */
    --text-xl: 1.424rem;     /* 19.9px - h3 */
    --text-2xl: 1.602rem;    /* 22.4px - h2 */
    --text-3xl: 1.802rem;    /* 25.2px - h1 */
    --text-4xl: 2.027rem;    /* 28.3px - Display */

    /* Font Weights - Minimal, intentional */
    --font-regular: 400;
    --font-medium: 500;
    --font-semibold: 600;
    --font-bold: 700;

    /* Line Heights - Golden ratio based */
    --leading-tight: 1.272;   /* 1.618 / 1.272 â‰ˆ golden ratio */
    --leading-normal: 1.618;  /* Golden ratio */
    --leading-relaxed: 1.75;  /* Slightly more relaxed */
}

/* Dark Theme */
html[data-theme="dark"] {
    /* Semantic Colors - Dark Theme */
    --bg-primary: #0F172A;      /* Main background - Slate 900 */
    --bg-secondary: #1E293B;    /* Secondary background - Slate 800 */
    --bg-tertiary: #334155;     /* Tertiary background - Slate 700 */
    --bg-elevated: #1E293B;     /* Cards, modals */
    --bg-input: #1E293B;        /* Form inputs */
    --bg-hover: #334155;        /* Hover states */

    /* Text Colors */
    --text-primary: #F1F5F9;    /* Main text - Slate 100 */
    --text-secondary: #CBD5E1;  /* Secondary text - Slate 300 */
    --text-tertiary: #94A3B8;   /* Tertiary text - Slate 400 */
    --text-disabled: #64748B;   /* Disabled text - Slate 500 */
    --text-inverse: #0F172A;    /* Text on light backgrounds */

    /* Border & Divider Colors */
    --border-primary: #334155;  /* Main borders - Slate 700 */
    --border-secondary: #475569; /* Secondary borders - Slate 600 */
    --border-focus: var(--brand-light); /* Focus state */
    --divider: #334155;         /* Dividers */

    /* Interactive States */
    --interactive-hover: #334155;
    --interactive-active: #475569;
    --interactive-disabled: #1E293B;

    /* Semantic Status Colors - adjusted for dark mode */
    --success: #34D399;
    --success-bg: #064E3B;
    --warning: #FBBF24;
    --warning-bg: #78350F;
    --error: #F87171;
    --error-bg: #7F1D1D;
    --info: #60A5FA;
    --info-bg: #1E3A8A;

    /* Shadows - More pronounced in dark mode for depth perception */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
    --shadow-md: 0 2px 8px -2px rgba(0, 0, 0, 0.4), 0 4px 4px -2px rgba(0, 0, 0, 0.2);
    --shadow-lg: 0 8px 16px -4px rgba(0, 0, 0, 0.5), 0 4px 8px -4px rgba(0, 0, 0, 0.3);
    --shadow-focus: 0 0 0 3px rgba(139, 92, 246, 0.15);
}

/* Auto dark mode - respects system preference unless overridden */
@media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) {
        --bg-primary: #0F172A;
        --bg-secondary: #1E293B;
        --bg-tertiary: #334155;
        --bg-elevated: #1E293B;
        --bg-input: #1E293B;
        --bg-hover: #334155;

        --text-primary: #F1F5F9;
        --text-secondary: #CBD5E1;
        --text-tertiary: #94A3B8;
        --text-disabled: #64748B;
        --text-inverse: #0F172A;

        --border-primary: #334155;
        --border-secondary: #475569;
        --border-focus: var(--brand-light);
        --divider: #334155;

        --interactive-hover: #334155;
        --interactive-active: #475569;
        --interactive-disabled: #1E293B;

        --success: #34D399;
        --success-bg: #064E3B;
        --warning: #FBBF24;
        --warning-bg: #78350F;
        --error: #F87171;
        --error-bg: #7F1D1D;
        --info: #60A5FA;
        --info-bg: #1E3A8A;

        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
        --shadow-md: 0 2px 8px -2px rgba(0, 0, 0, 0.4), 0 4px 4px -2px rgba(0, 0, 0, 0.2);
        --shadow-lg: 0 8px 16px -4px rgba(0, 0, 0, 0.5), 0 4px 8px -4px rgba(0, 0, 0, 0.3);
        --shadow-focus: 0 0 0 3px rgba(139, 92, 246, 0.15);
    }
}

  * {
    box-sizing: border-box;
  }

  html {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
    font-size: 14px;
    background: var(--bg-primary);
    color: var(--text-primary);
    line-height: 1.618; /* Golden ratio for perfect readability */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    transition: background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-variant-numeric: tabular-nums;
    letter-spacing: -0.011em; /* Optical refinement */
  }

  body {
    margin: 0;
    padding: 0;
    background: var(--bg-primary);
  }

  /* Links - Refined interactions */
  a {
    color: var(--text-primary);
    text-decoration: none;
    transition: color 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                opacity 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  a:hover {
    opacity: 0.7;
    text-decoration: none;
  }

  a:active {
    opacity: 0.5;
  }

  /* Buttons - Intentional feedback */
  button {
    font-family: inherit;
    font-size: inherit;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    color: inherit;
    transition: transform 0.15s cubic-bezier(0.4, 0, 0.2, 1),
                opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  }

  button:hover:not(:disabled) {
    opacity: 0.8;
  }

  button:active:not(:disabled) {
    transform: scale(0.98);
    opacity: 0.6;
  }

  button:disabled {
    cursor: not-allowed;
    opacity: 0.4;
  }

  /* Form inputs - Subtle, elegant focus */
  input, textarea, select {
    font-family: inherit;
    font-size: inherit;
    line-height: 1.618;
    background: var(--bg-input);
    border: 1px solid var(--border-primary);
    padding: 0.5rem;
    color: var(--text-primary);
    transition: border-color 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  input:focus, textarea:focus, select:focus {
    outline: none;
    border-color: var(--border-focus);
    box-shadow: var(--shadow-focus);
  }

  input:hover:not(:focus), textarea:hover:not(:focus), select:hover:not(:focus) {
    border-color: var(--border-secondary);
  }

/* Utility classes */
.upvote {
    color: var(--upvote);
    cursor: pointer;
  }

  .upvote:hover {
    color: var(--brand-dark);
  }

  .text-muted {
    color: var(--text-muted);
    font-size: 8pt;
  }

  .spacer {
    display: inline-block;
    width: 1em;
  }

  /* Typography - Clear hierarchy, optimal readability */
  h1, h2, h3, h4, h5, h6 {
    margin: 0;
    font-weight: var(--font-semibold);
    line-height: var(--leading-tight);
    color: var(--text-primary);
    letter-spacing: -0.02em; /* Tighter tracking for headings */
  }

  h1 {
    font-size: var(--text-3xl);
    font-weight: var(--font-bold);
    margin-bottom: 1rem;
  }

  h2 {
    font-size: var(--text-2xl);
    margin-bottom: 0.875rem;
  }

  h3 {
    font-size: var(--text-xl);
    margin-bottom: 0.75rem;
  }

  h4 {
    font-size: var(--text-lg);
    margin-bottom: 0.625rem;
  }

  h5 {
    font-size: var(--text-md);
    margin-bottom: 0.5rem;
  }

  h6 {
    font-size: var(--text-base);
    margin-bottom: 0.5rem;
  }

  /* Paragraphs - Optimal line length and spacing */
  p {
    margin: 0 0 1rem 0;
    line-height: var(--leading-normal);
    max-width: 65ch; /* Optimal reading length */
  }

  /* Small text */
  small {
    font-size: var(--text-sm);
    color: var(--text-secondary);
  }

  /* Strong emphasis */
  strong, b {
    font-weight: var(--font-semibold);
  }

  /* Code - Monospace with subtle background */
  code {
    font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
    font-size: 0.9em;
    background: var(--bg-secondary);
    padding: 0.125rem 0.375rem;
    border: 1px solid var(--border-primary);
    font-variant-ligatures: none;
  }

  /* Lists - Proper spacing and hierarchy */
  ul, ol {
    margin: 0 0 var(--space-4) 0;
    padding-left: var(--space-6);
  }

  li {
    margin-bottom: var(--space-2);
    line-height: var(--leading-normal);
  }

  /* Horizontal Rule - Minimal divider */
  hr {
    border: none;
    border-top: 1px solid var(--border-primary);
    margin: var(--space-6) 0;
  }

  /* Selection - Brand colored */
  ::selection {
    background: var(--brand);
    color: white;
  }

  /* Focus visible - Accessibility */
  :focus-visible {
    outline: 2px solid var(--brand);
    outline-offset: 2px;
  }

  /* Smooth scrolling - Intentional navigation */
  html {
    scroll-behavior: smooth;
  }

  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }

    html {
      scroll-behavior: auto;
    }
  }